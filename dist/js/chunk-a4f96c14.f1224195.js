(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a4f96c14"],{"0d3c":function(e,t,a){"use strict";a("9aba")},"0d5f":function(e,t,a){"use strict";a.r(t);var c=a("7a23");const l=e=>(Object(c["pushScopeId"])("data-v-0005d2e4"),e=e(),Object(c["popScopeId"])(),e),o={class:"container py-4"},n={class:"bg-white px-4 border"},d=l(()=>Object(c["createElementVNode"])("div",{class:"navbar py-3"},[Object(c["createElementVNode"])("div",{class:"container-fluid"},[Object(c["createElementVNode"])("span",{class:"navbar-brand"},"訂單管理")])],-1)),r={class:"table-responsive mb-3"},s={class:"table table-hover align-middle mb-0"},i=l(()=>Object(c["createElementVNode"])("thead",{class:"bg-gray-000"},[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",{class:"position-relative",width:"128"},"下單日期"),Object(c["createElementVNode"])("th",{class:"position-relative"},"訂單編號"),Object(c["createElementVNode"])("th",{class:"position-relative"},"商品"),Object(c["createElementVNode"])("th",{class:"position-relative",width:"128"},"應付金額"),Object(c["createElementVNode"])("th",{class:"position-relative",width:"128"},"狀態"),Object(c["createElementVNode"])("th",{width:"128"},"編輯")])],-1)),b={class:"list-unstyled my-0"},m={class:"form-check form-switch"},p=["id","onUpdate:modelValue","onChange"],O=["for"],j={key:0},u={key:1},E={class:"btn-group"},h=["onClick"],V=["onClick"];function N(e,t,a,l,N,g){const k=Object(c["resolveComponent"])("Loading"),y=Object(c["resolveComponent"])("Pagination"),v=Object(c["resolveComponent"])("OrderModal"),f=Object(c["resolveComponent"])("DelModal");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(k,{active:N.isLoading,"z-index":1060},null,8,["active"]),Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",n,[d,Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("table",s,[i,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(N.orders,(t,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:a},[N.orders.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:0,class:Object(c["normalizeClass"])({"text-gray-500 fw-light":!t.is_paid})},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.id.substr(1)),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("ul",b,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.products,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},Object(c["toDisplayString"])(e.product.title)+" 數量："+Object(c["toDisplayString"])(e.qty)+" "+Object(c["toDisplayString"])(e.product.unit),1))),128))])]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.currency(t.total)),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",m,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{id:"paidSwitch"+t.id,"onUpdate:modelValue":e=>t.is_paid=e,class:"form-check-input",type:"checkbox",onChange:e=>g.updatePaid(t)},null,40,p),[[c["vModelCheckbox"],t.is_paid]]),Object(c["createElementVNode"])("label",{class:"form-check-label",for:"paidSwitch"+t.id},[t.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",j,"付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",u,"未付款"))],8,O)])]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",E,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:e=>g.openModal("edit",t)}," 編輯 ",8,h),Object(c["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:e=>g.openModal("delete",t)}," 刪除 ",8,V)])])],2)):Object(c["createCommentVNode"])("",!0)],64))),128))])])]),Object(c["createVNode"])(y,{pages:N.pagination,onEmitPage:g.getOrders},null,8,["pages","onEmitPage"])])]),Object(c["createVNode"])(v,{ref:"orderModal",order:N.tempOrder,onUpdatePaid:g.updatePaid},null,8,["order","onUpdatePaid"]),Object(c["createVNode"])(f,{ref:"delModal",delItem:N.tempOrder.id,origin:N.pageName,onDelItem:g.delOrder},null,8,["delItem","origin","onDelItem"])])}var g=a("590b");const k=e=>(Object(c["pushScopeId"])("data-v-6aa9440e"),e=e(),Object(c["popScopeId"])(),e),y={id:"oderModal",ref:"modal",class:"modal fade","aria-hidden":"true","aria-labelledby":"oderModalLabel","data-bs-backdrop":"static",tabindex:"-1"},v={class:"modal-dialog modal-lg modal-dialog-scrollable"},f={class:"modal-content border-0"},B=k(()=>Object(c["createElementVNode"])("div",{class:"modal-header"},[Object(c["createElementVNode"])("h3",{id:"exampleModalLabel",class:"modal-title"},[Object(c["createElementVNode"])("span",null,"編輯訂單")]),Object(c["createElementVNode"])("button",{class:"btn-close",type:"button","aria-label":"Close","data-bs-dismiss":"modal"})],-1)),_={class:"modal-body"},S={class:"mb-4"},M=k(()=>Object(c["createElementVNode"])("h5",null,"客戶資訊",-1)),w={class:"pb-2 w-100"},D={class:"table m-0"},x={key:0},C=k(()=>Object(c["createElementVNode"])("th",{style:{width:"100px"}},"姓名",-1)),P=k(()=>Object(c["createElementVNode"])("th",null,"Email",-1)),I=k(()=>Object(c["createElementVNode"])("th",null,"電話",-1)),L=k(()=>Object(c["createElementVNode"])("th",null,"地址",-1)),$={class:"mb-4"},U=k(()=>Object(c["createElementVNode"])("h5",null,"訂單資訊",-1)),z={class:"pb-2 w-100"},F={class:"table m-0"},q=k(()=>Object(c["createElementVNode"])("th",{style:{width:"100px"}},"訂單編號",-1)),J=k(()=>Object(c["createElementVNode"])("th",null,"下單日期",-1)),R=k(()=>Object(c["createElementVNode"])("th",null,"付款日期",-1)),T={key:0},A={key:1},G=k(()=>Object(c["createElementVNode"])("th",null,"狀態",-1)),H={key:0,class:"text-success"},K={key:1,class:"text-gray-500"},Q=k(()=>Object(c["createElementVNode"])("th",null,"應付金額",-1)),W={class:"mb-4"},X=k(()=>Object(c["createElementVNode"])("h5",null,"訂單明細",-1)),Y={class:"pb-2 mw-100"},Z={class:"table m-0"},ee={style:{"white-space":"normal"}},te={class:"col-1"},ae={class:"col-1 text-end"},ce={class:"mb-3"},le=k(()=>Object(c["createElementVNode"])("h5",null,"付款狀態",-1)),oe={class:"row g-3 p-2"},ne={class:"col"},de={class:"d-inline-block py-2 me-2",for:"isEnabled1"},re=k(()=>Object(c["createElementVNode"])("span",{class:"px-2"}," 開啟 ",-1)),se={class:"d-inline-block py-2 me-2",for:"isEnabled0"},ie=k(()=>Object(c["createElementVNode"])("span",{class:"px-2"}," 關閉 ",-1)),be={class:"modal-footer"},me=k(()=>Object(c["createElementVNode"])("button",{class:"btn btn-outline-secondary me-3",type:"button","data-bs-dismiss":"modal"}," 取消 ",-1));function pe(e,t,a,l,o,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",y,[Object(c["createElementVNode"])("div",v,[Object(c["createElementVNode"])("div",f,[B,Object(c["createElementVNode"])("div",_,[Object(c["createElementVNode"])("section",S,[M,Object(c["createElementVNode"])("div",w,[Object(c["createElementVNode"])("table",D,[o.tempOrder.user?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tbody",x,[Object(c["createElementVNode"])("tr",null,[C,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(o.tempOrder.user.name),1)]),Object(c["createElementVNode"])("tr",null,[P,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(o.tempOrder.user.email),1)]),Object(c["createElementVNode"])("tr",null,[I,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(o.tempOrder.user.tel),1)]),Object(c["createElementVNode"])("tr",null,[L,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(o.tempOrder.user.address),1)])])):Object(c["createCommentVNode"])("",!0)])])]),Object(c["createElementVNode"])("section",$,[U,Object(c["createElementVNode"])("div",z,[Object(c["createElementVNode"])("table",F,[Object(c["createElementVNode"])("tbody",null,[Object(c["createElementVNode"])("tr",null,[q,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(o.tempOrder.id),1)]),Object(c["createElementVNode"])("tr",null,[J,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.date(o.tempOrder.create_at)),1)]),Object(c["createElementVNode"])("tr",null,[R,Object(c["createElementVNode"])("td",null,[o.tempOrder.paid_date?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",T,Object(c["toDisplayString"])(e.$filters.date(o.tempOrder.paid_date)),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",A,"時間不正確"))])]),Object(c["createElementVNode"])("tr",null,[G,Object(c["createElementVNode"])("td",null,[o.tempOrder.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("strong",H,"已付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",K,"尚未付款"))])]),Object(c["createElementVNode"])("tr",null,[Q,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.currency(o.tempOrder.total)),1)])])])])]),Object(c["createElementVNode"])("section",W,[X,Object(c["createElementVNode"])("div",Y,[Object(c["createElementVNode"])("table",Z,[Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(o.tempOrder.products,t=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t.id},[Object(c["createElementVNode"])("th",ee,Object(c["toDisplayString"])(t.product.title),1),Object(c["createElementVNode"])("td",te,Object(c["toDisplayString"])(t.qty)+" / "+Object(c["toDisplayString"])(t.product.unit),1),Object(c["createElementVNode"])("td",ae,Object(c["toDisplayString"])(e.$filters.currency(t.final_total)),1)]))),128))])])])]),Object(c["createElementVNode"])("section",ce,[le,Object(c["createElementVNode"])("div",oe,[Object(c["createElementVNode"])("div",ne,[Object(c["createElementVNode"])("label",de,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{id:"isEnabled1","onUpdate:modelValue":t[0]||(t[0]=e=>o.tempOrder.is_paid=e),class:"form-check-input",type:"radio",value:"true"},null,512),[[c["vModelRadio"],o.tempOrder.is_paid]]),re]),Object(c["createElementVNode"])("label",se,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{id:"isEnabled0","onUpdate:modelValue":t[1]||(t[1]=e=>o.tempOrder.is_paid=e),class:"form-check-input",type:"radio",value:"false"},null,512),[[c["vModelRadio"],o.tempOrder.is_paid]]),ie])])])])]),Object(c["createElementVNode"])("div",be,[me,Object(c["createElementVNode"])("button",{class:"btn btn-primary",type:"button",onClick:t[2]||(t[2]=t=>e.$emit("update-paid",o.tempOrder))}," 確認 ")])])])],512)}var Oe=a("e0ae"),je={mixins:[Oe["a"]],emits:["update-paid"],props:{order:{type:Object,default(){return{}}}},data(){return{status:{},modal:"",tempOrder:{is_paid:""},isPaid:!1}},watch:{order(){this.tempOrder={...this.order}},"tempOrder.is_paid":{handler(){"true"===this.tempOrder.is_paid?this.tempOrder.is_paid=!0:"false"===this.tempOrder.is_paid&&(this.tempOrder.is_paid=!1)},deep:!0}}};a("18dd");je.render=pe,je.__scopeId="data-v-6aa9440e";var ue=je,Ee=a("d4a2"),he={components:{DelModal:g["a"],Pagination:Ee["a"],OrderModal:ue},inject:["httpMessageState"],data(){return{pageName:"訂單",isLoading:!1,pagination:[],currentPage:1,orders:[],tempOrder:{id:""}}},methods:{getOrders(e=1){this.isLoading=!0,this.currentPage=e;const t="https://vue3-course-api.hexschool.io/api/haohao/admin/orders?page="+e;this.$http.get(t,this.tempProduct).then(e=>{this.orders=e.data.orders,this.pagination=e.data.pagination,this.isLoading=!1})},openModal(e,t){this.tempOrder={...t},"edit"===e?this.$refs.orderModal.openModal():"delete"===e&&this.$refs.delModal.openModal()},updatePaid(e){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/haohao/admin/order/"+e.id,a={is_paid:e.is_paid},c="更新付款狀態";this.$http.put(t,{data:a}).then(e=>{this.getOrders(this.currentPage),this.isLoading=!1,this.$refs.orderModal.hideModal(),this.httpMessageState(e,c)})},delOrder(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/haohao/admin/order/"+this.tempOrder.id;this.$http.delete(e).then(e=>{this.getOrders(this.currentPage),this.isLoading=!1,this.httpMessageState(e,"刪除訂單"),this.$refs.delModal.hideModal()})}},created(){this.getOrders()}};a("b068");he.render=N,he.__scopeId="data-v-0005d2e4";t["default"]=he},"18dd":function(e,t,a){"use strict";a("7d12")},"515d":function(e,t,a){},"590b":function(e,t,a){"use strict";var c=a("7a23");const l=e=>(Object(c["pushScopeId"])("data-v-0e2046c7"),e=e(),Object(c["popScopeId"])(),e),o={id:"delProductModal",ref:"modal",class:"modal fade","aria-hidden":"true","aria-labelledby":"delProductModalLabel","data-bs-backdrop":"static",tabindex:"-1"},n={class:"modal-dialog"},d={class:"modal-content border-0"},r={class:"modal-header"},s={id:"delProductModalLabel",class:"modal-title"},i=l(()=>Object(c["createElementVNode"])("button",{class:"btn-close",type:"button","aria-label":"Close","data-bs-dismiss":"modal"},null,-1)),b={class:"modal-body"},m={class:"text-danger"},p={class:"modal-footer"},O=l(()=>Object(c["createElementVNode"])("button",{class:"btn btn-outline-secondary me-3",type:"button","data-bs-dismiss":"modal"}," 取消 ",-1));function j(e,t,a,l,j,u){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("h3",s,[Object(c["createElementVNode"])("span",null,"刪除"+Object(c["toDisplayString"])(a.origin),1)]),i]),Object(c["createElementVNode"])("div",b,[Object(c["createTextVNode"])(" 是否永久刪除【 "),Object(c["createElementVNode"])("strong",m," "+Object(c["toDisplayString"])(a.delItem)+" ",1),Object(c["createTextVNode"])(" 】? ")]),Object(c["createElementVNode"])("div",p,[O,Object(c["createElementVNode"])("button",{class:"btn btn-danger",type:"button",onClick:t[0]||(t[0]=t=>e.$emit("del-item"))},"刪除")])])])],512)}var u=a("e0ae"),E={mixins:[u["a"]],props:["origin","delItem"],emits:["del-item"]};a("e492");E.render=j,E.__scopeId="data-v-0e2046c7";t["a"]=E},"7d12":function(e,t,a){},"9aba":function(e,t,a){},b068:function(e,t,a){"use strict";a("e63a")},d4a2:function(e,t,a){"use strict";var c=a("7a23");const l=e=>(Object(c["pushScopeId"])("data-v-75ca2a47"),e=e(),Object(c["popScopeId"])(),e),o={"aria-label":"Page navigation example"},n={class:"pagination justify-content-end"},d=l(()=>Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1)),r=l(()=>Object(c["createElementVNode"])("span",{class:"sr-only"},null,-1)),s=[d,r],i={key:0,class:"page-link"},b=["onClick"],m=l(()=>Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1)),p=l(()=>Object(c["createElementVNode"])("span",{class:"sr-only"},null,-1)),O=[m,p];function j(e,t,a,l,d,r){return Object(c["openBlock"])(),Object(c["createElementBlock"])("nav",o,[Object(c["createElementVNode"])("ul",n,[Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])([{disabled:1===a.pages.current_page},"page-item"])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(c["withModifiers"])(e=>r.emitPage(a.pages.current_page-1),["prevent"]))},s)],2),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.pages.total_pages,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t,class:Object(c["normalizeClass"])([{active:e===a.pages.current_page},"page-item"])},[e===a.pages.current_page?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",i,Object(c["toDisplayString"])(e),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("a",{key:1,class:"page-link",href:"#",onClick:Object(c["withModifiers"])(t=>r.emitPage(e),["prevent"])},Object(c["toDisplayString"])(e),9,b))],2))),128)),Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])([{disabled:a.pages.current_page===a.pages.total_pages},"page-item"])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(c["withModifiers"])(e=>r.emitPage(a.pages.current_page+1),["prevent"]))},O)],2)])])}var u={props:["pages"],methods:{emitPage(e){this.$emit("emit-page",e)}}};a("0d3c");u.render=j,u.__scopeId="data-v-75ca2a47";t["a"]=u},e492:function(e,t,a){"use strict";a("515d")},e63a:function(e,t,a){}}]);
//# sourceMappingURL=chunk-a4f96c14.f1224195.js.map