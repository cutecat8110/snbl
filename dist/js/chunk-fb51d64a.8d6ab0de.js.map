{"version":3,"sources":["webpack:///./src/views/back/Dashboard.vue?aa6c","webpack:///./node_modules/mitt/dist/mitt.mjs","webpack:///./src/methods/eventBus.js","webpack:///./src/views/back/Dashboard.vue","webpack:///./src/components/back/BackHeader.vue","webpack:///./src/components/back/BackHeader.vue?7fee","webpack:///./src/components/back/ToastMessages.vue","webpack:///./src/components/back/ToastMessages.vue?eaf1","webpack:///./src/methods/pushMessageState.js","webpack:///./src/views/back/Dashboard.vue?e556"],"names":["all","n","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","id","class","type","aria-controls","aria-expanded","aria-label","data-bs-target","data-bs-toggle","to","href","logout","methods","api","this","$http","post","then","res","data","success","$router","render","style","messages","msg","key","role","title","clearToast","content","inject","setTimeout","shift","index","message","toastShow","response","eventBus","join","components","BackHeader","ToastMessages","httpMessageState","token","document","cookie","replace","defaults","headers","common","Authorization","$swal","icon","text","__scopeId"],"mappings":"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","file":"js/chunk-fb51d64a.8d6ab0de.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Dashboard.vue?vue&type=style&index=0&id=17bd5288&lang=scss&scoped=true\"","export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt'\r\n\r\nconst emitter = mitt()\r\n\r\nexport default emitter\r\n","<template>\r\n  <div id=\"dashboard\">\r\n    <BackHeader />\r\n    <ToastMessages />\r\n    <router-view />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BackHeader from '@/components/back/BackHeader.vue'\r\nimport ToastMessages from '@/components/back/ToastMessages.vue'\r\nimport emitter from '@/methods/eventBus'\r\nimport httpMessageState from '@/methods/pushMessageState'\r\n\r\nexport default {\r\n  components: { BackHeader, ToastMessages },\r\n  provide() {\r\n    return {\r\n      emitter,\r\n      httpMessageState\r\n    }\r\n  },\r\n  created() {\r\n    const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1')\r\n    this.$http.defaults.headers.common.Authorization = `${token}`\r\n    const api = `${process.env.VUE_APP_API}api/user/check`\r\n    this.$http.post(api).then((res) => {\r\n      if (!res.data.success) {\r\n        this.$swal({\r\n          icon: 'warning',\r\n          title: '登入過期',\r\n          text: '請重新登入'\r\n        }).then(() => {\r\n          this.$router.push('/login')\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#dashboard {\r\n  min-height: 100%;\r\n  background: #f0f2f5;\r\n  padding-top: 56px;\r\n}\r\n</style>\r\n","<template>\r\n  <header class=\"fixed-top\">\r\n    <nav class=\"navbar navbar-expand-lg shadow-sm navbar-light bg-white\">\r\n      <div class=\"container\">\r\n        <router-link class=\"navbar-brand\" to=\"/admin/products\"> 後台 </router-link>\r\n        <button\r\n          class=\"navbar-toggler\"\r\n          type=\"button\"\r\n          aria-controls=\"navbarNav\"\r\n          aria-expanded=\"false\"\r\n          aria-label=\"Toggle navigation\"\r\n          data-bs-target=\"#navbarNav\"\r\n          data-bs-toggle=\"collapse\"\r\n        >\r\n          <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <div id=\"navbarNav\" class=\"collapse navbar-collapse\">\r\n          <div class=\"navbar-nav\">\r\n            <router-link class=\"nav-link\" to=\"/admin/products\">產品</router-link>\r\n            <router-link class=\"nav-link\" to=\"/admin/orders\">訂單</router-link>\r\n            <router-link class=\"nav-link\" to=\"/admin/coupons\">優惠</router-link>\r\n            <router-link class=\"nav-link\" to=\"/admin/article\">文章</router-link>\r\n          </div>\r\n          <div class=\"navbar-nav ms-auto\">\r\n            <a class=\"nav-link\" href=\"#\" @click.prevent=\"logout\">登出</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  </header>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  methods: {\r\n    logout() {\r\n      const api = `${process.env.VUE_APP_API}logout`\r\n      this.$http.post(api).then((res) => {\r\n        if (res.data.success) {\r\n          this.$router.push('/')\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./BackHeader.vue?vue&type=template&id=744a096a\"\nimport script from \"./BackHeader.vue?vue&type=script&lang=js\"\nexport * from \"./BackHeader.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"position-relative\">\r\n    <div class=\"toast-container position-absolute pt-4 pe-4 top-0 end-0\" style=\"z-index: 1500\">\r\n      <div\r\n        v-for=\"(msg, key) in messages\"\r\n        :key=\"key\"\r\n        :class=\"`toast${key}`\"\r\n        class=\"toast show\"\r\n        role=\"alert\"\r\n      >\r\n        <div class=\"toast-header\">\r\n          <span :class=\"`bg-${msg.style}`\" class=\"p-2 rounded me-2 d-inline-block\"></span>\r\n          <strong class=\"me-auto\">{{ msg.title }}</strong>\r\n          <button\r\n            class=\"btn-close\"\r\n            type=\"button\"\r\n            aria-label=\"Close\"\r\n            @click=\"clearToast(key)\"\r\n          ></button>\r\n        </div>\r\n        <div v-if=\"msg.content\" class=\"toast-body\">\r\n          {{ msg.content }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      messages: []\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    toastShow() {\r\n      setTimeout(() => {\r\n        this.messages.shift()\r\n      }, 4500)\r\n    },\r\n    clearToast(index) {\r\n      this.messages.splice(index, 1)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.emitter.on('push-message', (message) => {\r\n      const { style = 'success', title, content } = message\r\n      this.messages.push({ style, title, content })\r\n      this.toastShow()\r\n    })\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./ToastMessages.vue?vue&type=template&id=ece55560\"\nimport script from \"./ToastMessages.vue?vue&type=script&lang=js\"\nexport * from \"./ToastMessages.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import eventBus from '@/methods/eventBus'\r\n\r\nexport default function (response, title = '更新') {\r\n  if (response.data.success) {\r\n    eventBus.emit('push-message', {\r\n      style: 'success',\r\n      title: `${title}成功`\r\n    })\r\n  } else {\r\n    // 有些訊息是字串，有些則是陣列，在此統一格式\r\n    const message =\r\n      typeof response.data.message === 'string' ? [response.data.message] : response.data.message\r\n    eventBus.emit('push-message', {\r\n      style: 'danger',\r\n      title: `${title}失敗`,\r\n      content: message.join('、')\r\n    })\r\n  }\r\n}\r\n","import { render } from \"./Dashboard.vue?vue&type=template&id=17bd5288&scoped=true\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js\"\n\nimport \"./Dashboard.vue?vue&type=style&index=0&id=17bd5288&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-17bd5288\"\n\nexport default script"],"sourceRoot":""}